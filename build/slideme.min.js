var slideMe=slideMe||{},slideMeContainer=document.querySelectorAll("[data-slidemejs]")[0],getHead=document.getElementsByTagName("head")[0],isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),thisVideoPlayer;slideMe.errorThat=function(e,t){var i="Player error:<br>"+e;t.setAttribute("class","slideme-error"),t.innerHTML=i},slideMe.addAttributes=function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])},slideMe.throttle=function(e,t,i){var a,d;return function(){var s=i||this,l=+new Date,r=arguments;a&&a+t>l?(clearTimeout(d),d=setTimeout(function(){a=l,e.apply(s,r)},t)):(a=l,e.apply(s,r))}},slideMe.loadAssets=function(e,t,i){var a,d=document.getElementsByTagName("body")[0];"css"===t?(a=document.createElement("link"),a.href=e,a.rel="stylesheet",a.type="text/css"):(a=document.createElement("script"),a.src=e,a.async=!0,a.type="text/javascript"),d.appendChild(a),void 0!==i&&(a.onload=function(){i()})},slideMe.createDOM=function(){isVideoSlide=void 0!==slideMe.data.videoslides,haveSource=void 0!==slideMe.data.videosources;var e=document.createElement("div");e.setAttribute("id","slideme-wrapper");var t;if(haveSource){t='<video id="videojs" controls></video>';var i;i=void 0!==slideMe.data.videosourcesmobile&&null!==isMobile?slideMe.data.videosourcesmobile:slideMe.data.videosources,e.innerHTML=t,slideMeContainer.appendChild(e),thisVideoPlayer=document.getElementById("videojs");for(var a in i)if(i.hasOwnProperty(a)){var d=document.createElement("source");slideMe.addAttributes(d,{src:i[a],type:a}),thisVideoPlayer.appendChild(d)}if(void 0!==slideMe.data.subtitles)for(var s=0;s<slideMe.data.subtitles.length;s++){var l=document.createElement("track");slideMe.addAttributes(l,{src:slideMe.data.subtitles[s].src,srclang:slideMe.data.subtitles[s].srclang,label:slideMe.data.subtitles[s].label}),"true"===slideMe.data.subtitles[s]["default"]&&l.setAttribute("default",""),thisVideoPlayer.appendChild(l)}}},slideMe.loadJson=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=function(){t.status>=200&&t.status<400?(slideMe.data=JSON.parse(t.responseText),console.log("json fetched")):errorThat("cannot connect",slideMeContainer)},t.onerror=function(){errorThat("cannot connect",slideMeContainer)},t.send()},slideMe.reload=function(e){for(videojs.dispose();slideMeContainer.firstChild;)slideMeContainer.removeChild(slideMeContainer.firstChild);addPreloader(),loadJson(e)};var insertSpiner=document.createElement("style");insertSpiner.innerHTML='#slideme-preloader{font-family: Helvetica, Arial, sans-serif;position:absolute;top:0;bottom:0;left:0;right:0;padding:15% 0 0;background:#fff;z-index:100;color:#000;text-align:center}#slideme-preloader:after{content:"Loading, please wait...";font-size:12px;font-weight:100;display:block}@keyframes slideMeSpinner{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@-webkit-keyframes slideMeSpinner{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}.icon-spinner{-webkit-animation:slideMeSpinner .75s linear infinite;animation:slideMeSpinner 2s linear infinite;font-size:20px;line-height:50px;width:50px;height:50px;cursor:default;text-align:center;color:#000}',getHead.appendChild(insertSpiner),slideMe.addPreloader=function(){var e='<i class="icon-spinner">.</i>';preloaderWrapper=document.createElement("div"),preloaderWrapper.setAttribute("id","slideme-preloader"),preloaderWrapper.innerHTML=e,slideMeContainer.appendChild(preloaderWrapper)},slideMe.addPreloader(),slideMe.playList=function(){function e(){return slideMe.reload(this.getAttribute("data-json")),!1}var t;null!==document.getElementById("slideme-playlist")?t=document.getElementById("slideme-playlist"):(t=document.createElement("div"),t.setAttribute("id","slideme-playlist")),t.innerHTML='<div id="slideme-playlist-title">Playlist<div id="slideme-playlist-drop">></div></div><div id="slideme-playlist-list"></div>',slideMeContainer.appendChild(t),slideMeContainer.style.margin="0 auto 50px auto";var i=document.getElementById("slideme-playlist-title"),a=document.getElementById("slideme-playlist-list");void 0!==data.playlist&&(playListData=data.playlist);for(var d=0;d<playListData.length;d++){var s;"json"===playListData[d].type?(s=document.createElement("p"),s.innerHTML=playListData[d].title,s.setAttribute("data-json",playListData[d].link),a.appendChild(s),s.addEventListener("click",e)):(s=document.createElement("a"),s.innerHTML=playListData[d].title,s.setAttribute("href",playListData[d].link),a.appendChild(s))}var l=!1;i.addEventListener("click",function(){l===!1?(l=!0,a.style.display="block",i.classList.add("slideme-drop-active")):(l=!1,a.style.display="none",i.classList.remove("slideme-drop-active"))})},slideMe.destroyPlaylist=function(){document.getElementById("slideme-playlist").remove()},slideMe.fireVideJs=function(){if(void 0===data.preload&&(data.preload="metadata"),void 0===data.poster&&(data.poster=""),addAttributes(thisVideoPlayer,{"class":"video-js vjs-default-skin",poster:data.poster,preload:data.preload}),thisPlayer=videojs(thisVideoPlayer),void 0!==data.adTagUrl){var e={id:"videojs",adTagUrl:data.adTagUrl};slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/ads/slidemeads.js","css"),slideMe.loadAssets("//imasdk.googleapis.com/js/sdkloader/ima3.js","script"),slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/ads/slidemeads.js","script",function(){thisPlayer.ima(e),thisPlayer.ima.initializeAdDisplayContainer(),thisPlayer.ima.requestAds(),console.log("ad script loaded")})}thisPlayer.ready(function(){if(thisPlayer=this,thisPlayerEl=document.getElementsByTagName("video")[0],console.log("player created"),"html"===data.videoslidestype&&(preloaderWrapper.remove(),slideMeContainer.style.overflow="visible"),void 0!==data.autoplay&&"false"!==data.autoplay&&thisPlayer.play(),void 0!==data.videoslides&&document.getElementsByTagName("video")[0].addEventListener("timeupdate",throttle(setNewSlide,1e3)),data.videosources&&void 0!==data.videosourcesmobile){var e=document.createElement("div");e.setAttribute("id","slideme-quality");var t=thisPlayer.src(),i=thisPlayerEl.querySelectorAll('[src="'+t+'"]')[0];i=i.getAttribute("type");var a,d;for(var s in data.videosources)s===i&&(a=data.videosources[s]);for(var l in data.videosourcesmobile)l===i&&(d=data.videosourcesmobile[l]);e.innerHTML='<div id="slideme-change-quality">Auto</div><div id="slideme-change-quality-list"><p data-quality="'+a+'">High</p><p data-quality="'+d+'">Low</p></div>',document.getElementsByClassName("vjs-control-bar")[0].appendChild(e);var r=!1,n=document.getElementById("slideme-change-quality-list"),o=function(){var e=thisPlayer.currentTime(),t=this.getAttribute("data-quality");document.getElementById("slideme-change-quality").innerHTML=this.innerHTML,thisPlayer.src(t),thisPlayer.currentTime(e),thisPlayer.play(),r=!1,n.style.display="none"};document.querySelectorAll("[data-quality]")[0].addEventListener("click",o),document.querySelectorAll("[data-quality]")[1].addEventListener("click",o),document.getElementById("slideme-change-quality").addEventListener("click",function(){r===!1?(r=!0,n.style.display="block"):(r=!1,n.style.display="none")}),thisPlayerEl.addEventListener("click",function(){r=!1,n.style.display="none"})}})},document.addEventListener("DOMContentLoaded",function(){var e=document.querySelectorAll("[data-slidemejs]")[0];void 0!==e&&""!==e.getAttribute("data-slidemejs")&&slideMe.loadJson(e.getAttribute("data-slidemejs")),slideMe.loadAssets("//vjs.zencdn.net/4.11.2/video.js","script",function(){slideMe.createDOM()}),slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/slidemecss.min.css","css"),slideMe.loadAssets("//d3gr29hczmiozh.cloudfront.net/video-js.min.css","css")});