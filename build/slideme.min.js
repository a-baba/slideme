var slideMe=slideMe||{},slideMeContainer,getHead=document.getElementsByTagName("head")[0],isMobile=navigator.userAgent.match(/iPhone/i)||navigator.userAgent.match(/iPad/i)||navigator.userAgent.match(/Android/i),thisVideoPlayer;slideMe.errorThat=function(e,t){var i="Player error:<br>"+e;t.setAttribute("class","slideme-error"),t.innerHTML=i,slideMe=null},slideMe.addAttributes=function(e,t){for(var i in t)t.hasOwnProperty(i)&&e.setAttribute(i,t[i])},slideMe.throttle=function(e,t,i){var d,s;return function(){var a=i||this,l=+new Date,r=arguments;d&&d+t>l?(clearTimeout(s),s=setTimeout(function(){d=l,e.apply(a,r)},t)):(d=l,e.apply(a,r))}},slideMe.loadAssets=function(e,t,i){var d,s=document.getElementsByTagName("body")[0];"css"===t?(d=document.createElement("link"),d.href=e,d.rel="stylesheet",d.type="text/css"):(d=document.createElement("script"),d.src=e,d.async=!0,d.type="text/javascript"),s.appendChild(d),void 0!==i&&(d.onload=function(){i()})},slideMe.createDOM=function(){isVideoSlide=void 0!==slideMe.data.videoslides,haveSource=void 0!==slideMe.data.videosourcesmobile||void 0!==slideMe.data.videosources;var e=document.createElement("div");if(e.setAttribute("id","slideme-wrapper"),haveSource){slideMe.thisVideoPlayer=document.createElement("video");var t,i=slideMeContainer.offsetWidth;void 0===slideMe.data.videoslides?t=i/1.78:(i/=2,t=i/1.78),slideMe.addAttributes(slideMe.thisVideoPlayer,{id:"videojs",controls:"",width:i,height:t});var d;d=null!==isMobile?slideMe.data.videosourcesmobile:slideMe.data.videosources,slideMeContainer.appendChild(slideMe.thisVideoPlayer);for(var s in d)if(d.hasOwnProperty(s)){var a=document.createElement("source");slideMe.addAttributes(a,{src:d[s],type:s}),slideMe.thisVideoPlayer.appendChild(a)}if(void 0!==slideMe.data.subtitles)for(var l=0;l<slideMe.data.subtitles.length;l++){var r=document.createElement("track");slideMe.addAttributes(r,{src:slideMe.data.subtitles[l].src,srclang:slideMe.data.subtitles[l].srclang,label:slideMe.data.subtitles[l].label}),"true"===slideMe.data.subtitles[l]["default"]&&r.setAttribute("default",""),slideMe.thisVideoPlayer.appendChild(r)}slideMe.fireVideJs()}},slideMe.loadJson=function(e){var t=new XMLHttpRequest;t.open("GET",e,!0),t.onload=function(){t.status>=200&&t.status<400?(slideMe.data=JSON.parse(t.responseText),(void 0!==slideMe.data.videosourcesmobile||void 0!==slideMe.data.videosources)&&slideMe.loadAssets("//vjs.zencdn.net/4.11.2/video.js","script",function(){slideMe.createDOM()}),void 0!==slideMe.data.videoslides&&slideMe.getSlides(),console.log("json fetched")):slideMe.errorThat("cannot connect",slideMeContainer)},t.onerror=function(){slideMe.errorThat("cannot connect",slideMeContainer)},t.send()},slideMe.reload=function(e){for(videojs.dispose();slideMeContainer.firstChild;)slideMeContainer.removeChild(slideMeContainer.firstChild);addPreloader(),loadJson(e)};var insertSpiner=document.createElement("style");insertSpiner.innerHTML='[data-slidemejs] {font-family: Helvetica, Arial, sans-serif;}#slideme-preloader{position:absolute;top:0;bottom:0;left:0;right:0;padding:15% 0 0;background:#fff;z-index:100;color:#000;text-align:center}#slideme-preloader:after{content:"Loading, please wait...";font-size:12px;font-weight:100;display:block}@keyframes slideMeSpinner{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}@-webkit-keyframes slideMeSpinner{from{-webkit-transform:rotate(0deg)}to{-webkit-transform:rotate(360deg)}}.icon-spinner{-webkit-animation:slideMeSpinner .75s linear infinite;animation:slideMeSpinner 2s linear infinite;font-size:20px;line-height:50px;width:50px;height:50px;cursor:default;text-align:center;color:#000}',getHead.appendChild(insertSpiner),slideMe.addPreloader=function(){var e='<i class="icon-spinner">.</i>';preloaderWrapper=document.createElement("div"),preloaderWrapper.setAttribute("id","slideme-preloader"),preloaderWrapper.innerHTML=e,slideMeContainer.appendChild(preloaderWrapper),preloaderWrapper.remove()},slideMe.playList=function(){function e(){return slideMe.reload(this.getAttribute("data-json")),!1}var t;null!==document.getElementById("slideme-playlist")?t=document.getElementById("slideme-playlist"):(t=document.createElement("div"),t.setAttribute("id","slideme-playlist")),t.innerHTML='<div id="slideme-playlist-title">Playlist<div id="slideme-playlist-drop">></div></div><div id="slideme-playlist-list"></div>',slideMeContainer.appendChild(t),slideMeContainer.style.margin="0 auto 50px auto";var i=document.getElementById("slideme-playlist-title"),d=document.getElementById("slideme-playlist-list");void 0!==data.playlist&&(playListData=data.playlist);for(var s=0;s<playListData.length;s++){var a;"json"===playListData[s].type?(a=document.createElement("p"),a.innerHTML=playListData[s].title,a.setAttribute("data-json",playListData[s].link),d.appendChild(a),a.addEventListener("click",e)):(a=document.createElement("a"),a.innerHTML=playListData[s].title,a.setAttribute("href",playListData[s].link),d.appendChild(a))}var l=!1;i.addEventListener("click",function(){l===!1?(l=!0,d.style.display="block",i.classList.add("slideme-drop-active")):(l=!1,d.style.display="none",i.classList.remove("slideme-drop-active"))})},slideMe.destroyPlaylist=function(){document.getElementById("slideme-playlist").remove()},slideMe.fireVideJs=function(){if(void 0===slideMe.data.preload&&(slideMe.data.preload="metadata"),void 0===slideMe.data.poster&&(slideMe.data.poster=""),slideMe.addAttributes(slideMe.thisVideoPlayer,{"class":"video-js vjs-default-skin",poster:slideMe.data.poster,preload:slideMe.data.preload}),thisPlayer=videojs(slideMe.thisVideoPlayer),void 0!==slideMe.data.adTagUrl){var e={id:"videojs",adTagUrl:slideMe.data.adTagUrl};slideMe.loadAssets("/ads/slidemeads.css","css"),slideMe.loadAssets("//imasdk.googleapis.com/js/sdkloader/ima3.js","script"),slideMe.loadAssets("/ads/slidemeads.js","script",function(){thisPlayer.ima(e),thisPlayer.ima.initializeAdDisplayContainer(),thisPlayer.ima.requestAds(),console.log("ad script loaded")})}thisPlayer.ready(function(){if(thisPlayer=this,thisPlayerEl=document.getElementsByTagName("video")[0],console.log("player created"),"html"===slideMe.data.videoslidestype&&(preloaderWrapper.remove(),slideMeContainer.style.overflow="visible"),void 0!==slideMe.data.autoplay&&"false"!==slideMe.data.autoplay&&thisPlayer.play(),slideMe.data.videosources&&void 0!==slideMe.data.videosourcesmobile){var e=document.createElement("div");e.setAttribute("id","slideme-quality");var t=thisPlayer.src(),i=thisPlayerEl.querySelectorAll('[src="'+t+'"]')[0];i=i.getAttribute("type");var d,s;for(var a in slideMe.data.videosources)a===i&&(d=slideMe.data.videosources[a]);for(var l in slideMe.data.videosourcesmobile)l===i&&(s=slideMe.data.videosourcesmobile[l]);e.innerHTML='<div id="slideme-change-quality">Auto</div><div id="slideme-change-quality-list"><p data-quality="'+d+'">High</p><p data-quality="'+s+'">Low</p></div>',document.getElementsByClassName("vjs-control-bar")[0].appendChild(e);var r=!1,n=document.getElementById("slideme-change-quality-list"),o=function(){var e=thisPlayer.currentTime(),t=this.getAttribute("data-quality");document.getElementById("slideme-change-quality").innerHTML=this.innerHTML,thisPlayer.src(t),thisPlayer.currentTime(e),thisPlayer.play(),r=!1,n.style.display="none"};document.querySelectorAll("[data-quality]")[0].addEventListener("click",o),document.querySelectorAll("[data-quality]")[1].addEventListener("click",o),document.getElementById("slideme-change-quality").addEventListener("click",function(){r===!1?(r=!0,n.style.display="block"):(r=!1,n.style.display="none")}),thisPlayerEl.addEventListener("click",function(){r=!1,n.style.display="none"})}})},slideMe.getSlides=function(){slideMe.presentationNode=document.createElement("div"),slideMe.presentationNode.setAttribute("id","slideme-container"),slideMeContainer.appendChild(slideMe.presentationNode);var e=document.createElement("div");e.setAttribute("id","slideme-list");var t=document.createElement("div");if(t.setAttribute("id","slideme-list-wrapper"),slideMeContainer.appendChild(t),"images"===slideMe.data.videoslidestype){var i='<div id="slideme-btn-prev"><i class="icon-prevslide"><</i></div><div id="slideme-btn-next"><i class="icon-nextslide">></i></div>';t.innerHTML=i}else{t.setAttribute("class","slideme-text");var d=document.createElement("div");d.setAttribute("id","slideme-html-nav"),d.innerHTML='<div id="slideme-html-nav-left"><</div><div id="slideme-html-nav-right">></div>',t.appendChild(d),slideMeContainer.setAttribute("class","slideme-html")}slideMe.setSize()},slideMe.setNewSlide=function(){for(var e,t=Math.round(thisPlayer.currentTime()),i=0;i<timeList.length;i++)t>=timeList[i]&&(e=timeList[i]);if(currentArrayNr!==e){currentArrayNr=e;var d=document.querySelectorAll('[data-slideme-time="'+e+'"]')[0];"images"===data.videoslidestype?(createImgContainer.style.left=d!==addClicks[0]?150-d.offsetLeft+"px":50-d.offsetLeft+"px",firstImage.setAttribute("src",d.getAttribute("src"))):createImgContainer.style.top=-d.offsetTop+"px",document.getElementsByClassName("slideme-img-active")[0].classList.remove("slideme-img-active"),d.setAttribute("class","slideme-img-active")}},slideMe.setSize=function(){var e,t=slideMeContainer.offsetWidth;void 0===slideMe.data.videosourcesmobile&&void 0===slideMe.data.videosources?e=480:(t/=2,e=t/1.78,t=1.33*e),slideMe.presentationNode.style.width=t+"px",slideMe.presentationNode.style.height=e+"px";var i,d=slideMeContainer.offsetWidth;void 0===slideMe.data.videoslides?i=d/1.78:(d/=2,i=d/1.78),slideMe.addAttributes(slideMe.thisVideoPlayer,{id:"videojs",controls:"",width:d,height:i})},document.addEventListener("DOMContentLoaded",function(){slideMeContainer=document.querySelectorAll("[data-slidemejs]")[0],slideMe.addPreloader(),void 0!==slideMeContainer&&""!==slideMeContainer.getAttribute("data-slidemejs")&&slideMe.loadJson(slideMeContainer.getAttribute("data-slidemejs")),slideMe.loadAssets("../build/slidemecss.min.css","css")});